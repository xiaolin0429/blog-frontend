# API基础规范

## 基础信息
- **基础路径**: `/api/v1`
- **请求方式**: REST风格
- **数据格式**: JSON
- **字符编码**: UTF-8

## 请求头
- **Content-Type**: `application/json`
- **Accept**: `application/json`
- **Authorization**: `Bearer {token}` （需要认证的接口）

## 响应格式
所有接口返回JSON格式数据，包含以下字段：
```json
{
    "code": 0,      // 状态码，200表示成功，其他表示错误
    "message": "",  // 状态描述
    "data": null,   // 响应数据，可能是对象、数组或null
    "timestamp": "2024-01-19T10:30:00Z",  // 响应时间
    "requestId": "string"                 // 请求ID，用于追踪
}
```

## 分页格式
分页接口的响应数据格式如下：
```json
{
    "code": 200,
    "message": "success",
    "data": {
        "count": 0,        // 总记录数
        "next": "string",  // 下一页URL，无下一页时为null
        "previous": "string", // 上一页URL，无上一页时为null
        "results": []      // 当前页数据列表
    }
}
```

分页接口的请求参数：
- page: 页码，从1开始（可选，默认1）
- size: 每页数量（可选，默认10，最大50）
- ordering: 排序字段（可选，字段前加-表示降序，如-created_at）

## 通用状态码
- 200: 请求成功
- 201: 创建成功
- 204: 删除成功
- 400: 请求参数错误
- 401: 未授权（未登录或token已过期）
- 403: 权限不足
- 404: 资源不存在
- 409: 资源冲突（如重复创建）
- 422: 业务逻辑错误
- 500: 服务器内部错误

## 业务错误码
### 用户相关（1000-1999）
- 1000: 用户名或密码错误
- 1001: 用户名已存在
- 1002: 邮箱已存在
- 1003: 密码不匹配
- 1004: 旧密码错误
- 1005: Token已过期
- 1006: Token无效
- 1007: 用户已被禁用

### 文章相关（2000-2999）
- 2000: 文章标题已存在
- 2001: 文章不存在
- 2002: 无权限操作此文章
- 2003: 文章状态无效
- 2004: 文章已归档，无法修改
- 2005: 文章已发布，无法删除

### 评论相关（3000-3999）
- 3000: 评论不存在
- 3001: 无权限操作此评论
- 3002: 父评论不存在
- 3003: 评论内容不能为空
- 3004: 评论内容超过最大长度

### 分类相关（4000-4999）
- 4000: 分类名称已存在
- 4001: 分类不存在
- 4002: 无权限操作此分类
- 4003: 父分类不存在
- 4004: 不能将分类设为自己的子分类
- 4005: 分类下存在文章，无法删除
- 4006: 分类下存在子分类，无法删除

### 标签相关（5000-5999）
- 5000: 标签名称已存在
- 5001: 标签不存在
- 5002: 无权限操作此标签
- 5003: 标签下存在文章，无法删除 